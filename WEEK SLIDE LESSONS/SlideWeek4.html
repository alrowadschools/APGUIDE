<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.jsdelivr.net/npm/pptxgenjs@3.10.0/dist/pptxgen.bundle.js"></script>
    <script src="https://unpkg.com/mammoth@1.4.8/mammoth.browser.min.js"></script>
    <link rel="stylesheet" href="APCSP PDF WEEK FILES/SCRIPTS/weekstyles.css">
    <title>PPT EXTRACTOR - WEEK 4</title>
</head>
<body>
    <!-- Loader -->
    <div class="loader-container" id="loader">
        <div class="loader-content">
            <div class="loader">
                <div class="loader-circle"></div>
                <div class="loader-circle"></div>
                <div class="loader-inner">PPT</div>
            </div>
            <div class="loader-text">Loading Content...</div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.9.359/pdf.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.9.359/pdf.worker.min.js"></script>
    <script src="https://cozmo.github.io/jsQR/jsQR.js"></script>

    <!-- Modal for extracted content -->
    <div class="modal" id="extracted-content-modal">
        <div class="modal-content">
            <div class="modal-body">
                <div class="modal-pages-container" id="modal-pages-container">
                    <!-- Pages will be inserted here -->
                </div>
            </div>
            <div class="modal-nav" style="position: relative; display: flex; align-items: center;">
                <!-- Left group -->
                <div style="display: flex; align-items: center; gap: 10px;">
                    <button class="modal-nav-btn" id="modal-prev-btn" onclick="prevModalPage()">‚óÄÔ∏è</button>
                    <div class="modal-page-info" id="modal-page-info">SLIDE 1 of 1</div>
                    
                    <!-- Bottom Navigation Bar -->
                    <div class="container-items" style="margin-bottom: 0px;height:0px;">
                        <button class="item-color" style="--color: #facc15" aria-color="üìöWK-4:Visual" onclick="showIframe('https://dannyvanpoucke.be/wp-content/uploads/2020/12/surface_Sinc2D_25_Ens.gif')"></button>
                        <button class="item-color" style="--color: #e11d48" aria-color="üìöWK-4:WHITE BOARD" onclick="showIframe('https://wbo.ophir.dev/boards/anonymous')"></button>
                        <button class="item-color" style="--color: #facc15" aria-color="üìöWK-4:Lesson Video" onclick="showIframe('https://www.youtube.com/embed/7_SX4pTr3gk')"></button>
                        <button class="item-color" style="--color: #f472b6" aria-color="üìöWK-4:JOIN MY QUIZZ" onclick="showIframe('https://wayground.com/join?gc=52065078&source=liveDashboard')"></button>
                        <button class="item-color" style="--color: #84cc16" aria-color="üìöWK-4:Practice Test" onclick="openTest()"></button>
                    </div>
                </div>

                <!-- Close button (slightly left of center) -->
                <button class="modal-close" onclick="closeModal()" style="position: absolute; left: 90%; transform: translateX(-65%);background:red;">‚úñÔ∏è</button>

                <!-- Right button -->
                <button class="modal-nav-btn" id="modal-next-btn" onclick="nextModalPage()">‚ñ∂Ô∏è</button>
            </div>
        </div>
    </div>

    <div class="container">
        <!-- Week Loading Button -->
        <div class="action-buttons">
            <!-- Input box (hidden) -->
            <input type="text" id="WeekNoInput" placeholder="Enter Week No" style="margin-bottom: 8px; width: 100px; padding: 4px;display:none;">
            
            <!-- Week 4 Load Button -->
            <button class="btn-drive" onclick="loadWeekPDF(4)">WEEK 4</button>
        </div>

        <!-- Upload and General Extract Button -->
        <div class="action-buttons">
            <button class="btn-drive" onclick="loadPCPDF()">UPLOADüìÅ</button>
            <button class="btn-view-extracted" id="general-extract-btn" onclick="extractGeneralPDF()" disabled>EXTRACT</button>
        </div>

        <!-- PDF Viewer -->
        <div class="pdf-viewer-container" id="pdf-viewer-container" style="display:none;">
            <div class="viewer-header" style="display:none;">
                <div class="viewer-title" style="display:none;">
                    <div class="extraction-status" id="extraction-status">
                        <div class="status-content">
                            <div class="status-spinner"></div>
                            <div class="status-text" id="status-text">Extracting content...</div>
                            <div class="status-progress">
                                <div class="status-bar" id="status-bar"></div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="viewer-controls">
                    <div class="zoom-controls">
                        <button class="zoom-btn" onclick="zoomOut()">-</button>
                        <span class="zoom-level" id="zoom-level">100%</span>
                        <button class="zoom-btn" onclick="zoomIn()">+</button>
                    </div>
                    <button class="btn-viewer" onclick="prevPage()">
                        <svg width="16" height="16" viewBox="0 0 24 24">
                            <path fill="currentColor" d="M15.41,16.58L10.83,12L15.41,7.41L14,6L8,12L14,18L15.41,16.58Z"/>
                        </svg>
                        Prev
                    </button>
                    <span>Page: <input type="number" id="current-page" class="page-input" min="1" value="1" onchange="goToPage(this.value)"></span>
                    <span id="total-pages">/ 1</span>
                    <button class="btn-viewer" onclick="nextPage()">
                        Next
                        <svg width="16" height="16" viewBox="0 0 24 24">
                            <path fill="currentColor" d="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z"/>
                        </svg>
                    </button>
                    <button class="btn-viewer" onclick="closeViewer()">
                        <svg width="16" height="16" viewBox="0 0 24 24">
                            <path fill="currentColor" d="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"/>
                        </svg>
                        Close
                    </button>
                </div>
            </div>
            <div class="pdf-js-viewer-container" style="display:none;">
                <div id="pdf-canvas-container" style="display:none;"></div>
            </div>
        </div>

        <!-- Drop zone -->
        <div class="drop-zone" id="drop-zone" style="display:none;">
            <div class="drop-zone-icon">üìÅ</div>
            <div class="drop-zone-text">Drop your PDF here or click to browse</div>
            <div class="drop-zone-hint">Supports PDF files up to 50MB</div>
            <input type="file" id="file-input" accept=".pdf,application/pdf">
        </div>

        <!-- Week 4 Extract Button -->
        <div class="action-buttons">
            <button class="btn-view-extracted" id="extract-week-4-btn" onclick="extractWeek(4)" disabled>Extract Week 4</button>
        </div>

        <div class="stats-bar" id="stats-bar" style="display: none;">
            <div class="stat-item" style="display: none;">
                <div class="stat-value" id="stat-pages" style="display: none;">0</div>
                <div class="stat-label" style="display:none;">Pages</div>
            </div>
            <div class="stat-item" style="display: none;">
                <div class="stat-value" id="stat-text" style="display: none;">0</div>
                <div class="stat-label" style="display:none;">Text Blocks</div>
            </div>
            <div class="stat-item" style="display: none;">
                <div class="stat-value" id="stat-images" style="display: none;">0</div>
                <div class="stat-label" style="display:none;">Images</div>
            </div>
        </div>

        <div id="content-container" style="display:none;"></div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.9.359/pdf.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jsqr@1.4.0/dist/jsQR.min.js"></script>
    <script src="https://unpkg.com/pptxgenjs@3.12.0/dist/pptxgen.bundle.js"></script>

    <!-- Single consolidated script file -->
    <script src="APCSP PDF WEEK FILES/SCRIPTS/GeneralSlides.js"></script>

    <script>
        // Auto-click WEEK 4 button when page loads
        window.addEventListener('DOMContentLoaded', function() {
            // Small delay to ensure all scripts are loaded
            setTimeout(() => {
                const week4Button = document.querySelector('[onclick="loadWeekPDF(4)"]');
                if (week4Button) {
                    week4Button.click();
                }
            }, 1000);
        });
    </script>

</body>
</html>
